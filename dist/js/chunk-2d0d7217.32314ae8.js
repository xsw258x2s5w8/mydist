(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7217"],{7602:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{title:"弹出子表示例",bordered:!1}},[e("j-vxe-table",{attrs:{toolbar:"","row-number":"","row-selection":"","highlight-current-row":"","click-row-show-sub-form":"","click-row-show-main-form":"",height:750,loading:t.loading,columns:t.columns,dataSource:t.dataSource},on:{detailsConfirm:t.handleDetailsConfirm},scopedSlots:t._u([{key:"mainForm",fn:function(a){var o=a.row;return[o?[e("a-form-model",{ref:"form2",attrs:{model:o,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-row",{attrs:{gutter:8}},[e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"ID",prop:"id"}},[e("a-input",{attrs:{disabled:""},model:{value:o.id,callback:function(e){t.$set(o,"id",e)},expression:"row.id"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"序号",prop:"num"}},[e("a-input",{model:{value:o.num,callback:function(e){t.$set(o,"num",e)},expression:"row.num"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"船名",prop:"ship_name"}},[e("a-input",{model:{value:o.ship_name,callback:function(e){t.$set(o,"ship_name",e)},expression:"row.ship_name"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"呼叫",prop:"call"}},[e("a-input",{model:{value:o.call,callback:function(e){t.$set(o,"call",e)},expression:"row.call"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"长",prop:"len"}},[e("a-input",{model:{value:o.len,callback:function(e){t.$set(o,"len",e)},expression:"row.len"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"吨",prop:"ton"}},[e("a-input",{model:{value:o.ton,callback:function(e){t.$set(o,"ton",e)},expression:"row.ton"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"付款方",prop:"payer"}},[e("a-input",{model:{value:o.payer,callback:function(e){t.$set(o,"payer",e)},expression:"row.payer"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"数",prop:"count"}},[e("a-input",{model:{value:o.count,callback:function(e){t.$set(o,"count",e)},expression:"row.count"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"公司",prop:"company"}},[e("a-input",{model:{value:o.company,callback:function(e){t.$set(o,"company",e)},expression:"row.company"}})],1)],1),e("a-col",{attrs:{span:8}},[e("a-form-model-item",{attrs:{label:"动向",prop:"trend"}},[e("a-input",{model:{value:o.trend,callback:function(e){t.$set(o,"trend",e)},expression:"row.trend"}})],1)],1)],1)],1)]:t._e()]}},{key:"subForm",fn:function(a){var o=a.row;return[t.loadSubData(o)?[e("j-vxe-table",{ref:"subFormTable",attrs:{height:"auto","max-height":350,loading:t.subTable.loading,columns:t.subTable.columns,dataSource:t.subTable.dataSource}})]:t._e()]}}])})],1)},l=[],n=a("0fea"),r=a("2475"),i={name:"PopupSubTable",data:function(){return{loading:!1,dataSource:[],columns:[{key:"num",title:"序号",width:"80px"},{key:"ship_name",title:"船名",width:"180px",type:r["b"].input},{key:"call",title:"呼叫",width:"80px"},{key:"len",title:"长",width:"80px"},{key:"ton",title:"吨",width:"120px"},{key:"payer",title:"付款方",width:"120px"},{key:"count",title:"数",width:"40px"},{key:"company",title:"公司",minWidth:"180px",showDetails:!0},{key:"trend",title:"动向",width:"120px"}],subTable:{currentRowId:null,loading:!1,pagination:{current:1,pageSize:200,pageSizeOptions:["100","200"],total:0},selectedRows:[],dataSource:[],columns:[{key:"dd_num",title:"调度序号",width:"120px"},{key:"tug",title:"拖轮",width:"180px",type:r["b"].input},{key:"work_start_time",title:"作业开始时间",width:"180px",type:r["b"].input},{key:"work_stop_time",title:"作业结束时间",width:"180px",type:r["b"].input},{key:"type",title:"船舶分类",width:"120px",type:r["b"].input},{key:"port_area",title:"所属港区",minWidth:"120px",type:r["b"].input}]},url:{getData:"/mock/vxe/getData"},mainForm:{id:"",num:"",ship_name:"",call:"",len:"",ton:"",payer:"",count:"",company:"",trend:""},labelCol:{span:4},wrapperCol:{span:20},rules:{num:[{required:!0,message:"必须输入序号"}]}}},created:function(){this.loadData()},methods:{log:console.log,loadData:function(){var t=this,e={pageNo:1,pageSize:30};this.loading=!0,Object(n["c"])(this.url.getData,e).then((function(e){e.success?(t.dataSource=e.result.records,t.selectedRows=[]):t.$error({title:"主表查询失败",content:e.message})})).finally((function(){t.loading=!1}))},loadSubData:function(t){var e=this;if(t){if(this.subTable.currentRowId===t.id)return!0;this.subTable.currentRowId=t.id;var a={pageNo:1,pageSize:30,parentId:t.id};return this.subTable.loading=!0,Object(n["c"])(this.url.getData,a).then((function(t){t.success?e.subTable.dataSource=t.result.records:e.$error({title:"主表查询失败",content:t.message})})).finally((function(){e.subTable.loading=!1})),!0}return!1},handleDetailsConfirm:function(t){var e=this,a=t.row,o=t.$table,l=t.callback;o.validate(a).then((function(t){t?(l(!1),e.$message.warn("校验失败")):(l(!0),e.loading=!0,setTimeout((function(){e.loading=!1,e.$message.success("保存成功")}),1e3))}))}}},s=i,u=a("2877"),c=Object(u["a"])(s,o,l,!1,null,"365fa5d4",null);e["default"]=c.exports}}]);